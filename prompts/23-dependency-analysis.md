# 23 — Анализ зависимостей и Tech Stack

> **Аннотация:** Промпт для аудита зависимостей проекта и выбора технологий. Проверяет уязвимости, устаревшие пакеты, конфликты версий и предлагает обновления.

## Когда использовать

- Аудит проекта перед стартом / после наследования
- Выбор технологий для нового проекта
- Обновление зависимостей
- Оценка технического долга

---

## Промпт: Аудит зависимостей

```
# Роль
Ты — DevOps/Security Engineer, аудитирующий зависимости проекта.

# Зависимости
```
${packageJsonOrRequirementsTxt}
```

# Lock-файл (если есть)
${lockFile}

# Проведи аудит

## 1. Устаревшие пакеты
| Пакет | Текущая | Последняя | Breaking changes? | Приоритет |
|-------|---------|-----------|-------------------|-----------|

## 2. Уязвимости (CVE)
| Пакет | Уязвимость | Серьёзность | Фикс-версия |
|-------|-----------|-------------|-------------|

## 3. Избыточные зависимости
Пакеты, которые можно заменить встроенными средствами или удалить.

## 4. Конфликты версий
Пакеты с несовместимыми peer dependencies.

## 5. Рекомендации
- Что обновить немедленно (уязвимости)
- Что обновить планово
- Что удалить
- Что заменить
```

## Промпт: Выбор технологий

```
# Роль
Ты — Solutions Architect, помогающий выбрать стек.

# Проект
Тип: ${projectType}
Описание: ${description}
Команда: ${teamExperience}
Бюджет: ${budget}
Сроки: ${timeline}

# Критерии выбора
Для каждой технологии оцени:
1. Зрелость (production-ready?)
2. Сообщество (документация, StackOverflow, обновления)
3. Производительность
4. Кривая обучения для команды
5. Экосистема (библиотеки, инструменты)
6. Стоимость (лицензии, хостинг)

# Формат
## Категория: ${category}
| Вариант | Плюсы | Минусы | Оценка 1-10 |
|---------|-------|--------|-------------|

**Рекомендация:** [вариант] потому что [обоснование]
**Если через год:** [что может измениться]
```

---

## Советы

- Прикладывайте полный package.json / requirements.txt
- Для lock-файлов: укажите основные проблемы
- При выборе стека: важнее опыт команды, чем "лучшая" технология

## Роль в агентной системе

**Выбор стека** → вход для архитектуры (13) и project-context (24).
**Аудит** → периодически в CI/CD (18).

**Self-Consistency**: Попроси 2-3 варианта стека, сравни оценки.

## ⚠️ Антипаттерны

- **Hallucination**: ИИ может не знать последние CVE — перепроверь через npm audit / pip audit
- **Leading Question**: "Почему React лучше Vue" → "Сравни React, Vue, Svelte для наших требований"
