# 24 — Проект-контекст для ИИ

> **Аннотация:** Промпт-генератор: создаёт файл project-context, который передаётся ИИ при каждом запросе. Единый источник правды о проекте: стек, архитектура, конвенции, ограничения.

## Когда использовать

- Настройка `.cursorrules` / `copilot-instructions.md` / `AGENTS.md`
- Создание контекстного файла для нового проекта
- Обновление контекста после архитектурных изменений

---

## Промпт: Генерация project-context

```
# Роль
Ты — Technical Writer, создающий project-context файл для ИИ-агентов.

# Что ты знаешь о проекте

Код: ${projectCode}
README: ${readme}
package.json: ${packageJson}
Конфиг: ${config}

# Задача
Создай файл project-context.md — единый источник правды для ИИ.

# Структура файла

## Project: [Название]
[1-2 предложения о проекте]

## Стек
- Frontend: [точные версии]
- Backend: [точные версии]
- Database: [тип, ORM]
- Инфраструктура: [хостинг, CI]

## Архитектура
- Тип: [монолит / микросервисы / модульный монолит]
- Структура: [feature-based / layer-based]
- Стейт: [как управляется]
- API: [REST / GraphQL / gRPC]

## Файловая структура
```
[дерево с описаниями]
```

## Конвенции
- Именование: [правила]
- Файловая структура: [правила]
- Тесты: [где, как]
- Коммиты: [формат]
- Импорты: [порядок, алиасы]

## Ключевые паттерны
[2-3 примера кода, показывающие стиль проекта]

## Ограничения (Guardrails)
- НЕЛЬЗЯ: [список]
- ВСЕГДА: [список]

## Boot Sequence
1. pwd
2. Чтение progress.txt
3. Чтение features.json
4. git log --oneline -10
5. Проверка dev-сервера
6. Fix-First если сломано

## Полезные команды
| Команда | Описание |
|---------|----------|
| npm run dev | Запуск dev-сервера |
| ... | ... |
```

---

## Результат

Готовый файл для вставки в:
- `.cursorrules`
- `.github/copilot-instructions.md`
- `AGENTS.md`
- System prompt для Claude / ChatGPT

## Советы

- Обновляйте после каждого крупного изменения архитектуры
- Включайте реальные примеры кода — это **Few-Shot** для стиля
- Чем точнее версии технологий — тем меньше ошибок

## Роль в агентной системе

Это **фундамент** агентной системы — системный промпт для ВСЕХ агентов.

### Где используется:
- `.cursorrules` — Cursor IDE
- `.github/copilot-instructions.md` — GitHub Copilot
- `AGENTS.md` — Claude Code
- System prompt для Claude / ChatGPT / Gemini

### Ключевые секции для агентной работы:
1. **Boot Sequence** — что делать первым делом
2. **Guardrails** — чего НЕЛЬЗЯ делать
3. **JSON-трекинг** — features.json как единственный источник правды
4. **Sub-Agents** — как делегировать
5. **New context > compression** — при потере контекста — новое окно + Boot Sequence

### Связь с другими промптами:
```
Архитектура (13) → Project Context (24) → Initializer (19) → Coding Agent (20)
```

## ⚠️ Антипаттерны

- **Vagueness**: "Стек: React" → "React 19.2, Next.js 16.0.7, TypeScript 5"
- **Assumption**: Не предполагай что ИИ знает проект — документируй всё
- **Context Window**: Контекст должен быть компактным — важное первым, детали позже
