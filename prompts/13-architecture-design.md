# 13 — Проектирование архитектуры

> **Аннотация:** Промпт для проектирования архитектуры системы или модуля. Охватывает компоненты, потоки данных, технологии, масштабирование и компромиссы. Подходит для system design с нуля и редизайна.

## Когда использовать

- Старт нового проекта — архитектурные решения
- Проектирование нового крупного модуля
- System design перед интервью
- Выбор между архитектурными подходами

---

## Промпт

```
# Роль
Ты — Solutions Architect с опытом проектирования
высоконагруженных систем.

# Задача
Спроектируй архитектуру для: ${requirement}

# Требования
- Ожидаемая нагрузка: ${expectedLoad}
- Задержка: ${latency}
- Доступность: ${availability}
- Бюджет: ${budget}
- Команда: ${teamSize} разработчиков

# Функциональные требования
1. ${funcReq1}
2. ${funcReq2}
3. ${funcReq3}

# Нефункциональные требования
- Масштабируемость: ${scalability}
- Безопасность: ${security}
- Мониторинг: ${monitoring}

# Предоставь

## 1. Диаграмма архитектуры (ASCII)
```
[клиент] → [API Gateway] → [Service A]
                          → [Service B] → [Database]
```

## 2. Компоненты
Для каждого:
- Назначение
- Технология (с обоснованием)
- Интерфейсы (входы/выходы)
- SLA

## 3. Поток данных
Для основных сценариев: как данные проходят через систему

## 4. Модель данных
Основные сущности, связи, хранилища

## 5. Масштабирование
- Горизонтальное vs вертикальное
- Кэширование
- Очереди
- CDN

## 6. Компромиссы
Для каждого ключевого решения:
- Что выбрали и почему
- Альтернативы и почему отказались
- При каких условиях стоит пересмотреть

## 7. Поэтапный план реализации
Фаза 1 (MVP) → Фаза 2 → Фаза 3
```

---

## Советы

- Чем больше конкретики в требованиях — тем лучше архитектура
- Указывайте команду и бюджет — это влияет на сложность решения
- Для сравнения: попросите 2-3 варианта архитектуры с pros/cons

## Интеграция с агентной системой

Результат этого промпта → вход для:
- `01-global-dev-plan.md` (план на основе архитектуры)
- `19-project-init.md` (структура каталогов из архитектуры)
- `24-project-context.md` (ADR для контекста ИИ)

**Prompt Chaining**: Архитектура (13) → План (01) → Декомпозиция (21) → Init (19)

**Self-Consistency**: Попроси 2-3 варианта архитектуры, сравни трейдофы

## ⚠️ Антипаттерны

- **Overloading**: Микросервисы для команды из 5 человек — overengineering
- **Assumption**: ADR для каждого решения, не "это очевидно"
- **CoT**: Думай пошагово: нагрузка → компоненты → потоки → компромиссы
